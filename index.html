<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>중랑마을넷</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- AOS Library for Scroll Animations -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;700&display=swap');
        
        :root {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Noto Sans KR', sans-serif;
            overflow-x: hidden;
            -webkit-tap-highlight-color: transparent; /* 모바일 탭 하이라이트 제거 */
        }

        .hero-section {
            background: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), 
                        url('https://images.unsplash.com/photo-1517048676732-d65bc937f952?auto=format&fit=crop&q=80&w=1200');
            background-size: cover;
            background-position: center;
            background-attachment: scroll; /* 모바일 호환성을 위해 fixed -> scroll 변경 고려 (일부 모바일 브라우저 이슈 방지) */
        }
        @media (min-width: 768px) {
            .hero-section {
                background-attachment: fixed;
            }
        }

        .nav-link {
            position: relative;
            cursor: pointer;
        }
        .nav-link::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: -2px;
            left: 0;
            background-color: #16a34a;
            transition: width 0.3s ease;
        }
        .nav-link:hover::after {
            width: 100%;
        }

        #main-nav {
            background-color: white;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            transition: transform 0.4s ease-in-out, background-color 0.3s ease;
        }

        #main-nav.nav-hidden {
            transform: translateY(-100%);
        }

        #main-nav.nav-visible {
            transform: translateY(0);
        }

        /* --- Page Transition Logic --- */
        .page-content {
            display: none;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s cubic-bezier(0.4, 0, 0.2, 1), transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .page-content.active {
            display: block;
        }
        .page-content.fade-in {
            opacity: 1;
            transform: translateY(0);
        }

        /* --- Accordion Animation --- */
        .accordion-content {
            transition: max-height 0.4s ease-in-out, opacity 0.4s ease-in-out;
            max-height: 0;
            opacity: 0;
            overflow: hidden;
        }
        .accordion-btn.active .accordion-icon {
            transform: rotate(180deg);
            background-color: #16a34a; /* green-600 */
            color: white;
        }
        .accordion-btn.active + .accordion-content {
            opacity: 1;
        }

        /* Smooth Sorting Animation */
        .news-item {
            display: block;
            opacity: 1;
            transform: scale(1);
            transition: opacity 0.4s ease, transform 0.4s ease;
            cursor: pointer;
        }
        
        .news-item.hidden-category {
            display: none;
            opacity: 0;
            transform: scale(0.95);
        }

        @keyframes fadeInScale {
            from { opacity: 0; transform: translateY(10px) scale(0.98); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        .item-animate {
            animation: fadeInScale 0.5s forwards ease-out;
        }

        /* Activity Card Hover Effect */
        .activity-card {
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: pointer;
        }
        .activity-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
        }
        
        /* No Scrollbar for filter */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <!-- Navigation -->
    <nav class="fixed w-full z-50 nav-visible" id="main-nav">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16 md:h-20 items-center">
                <div class="flex items-center">
                    <a href="javascript:void(0)" onclick="showPage('home'); return false;" class="text-xl md:text-2xl font-bold text-green-600 tracking-tight">중랑마을넷</a>
                </div>
                <div class="hidden md:flex items-center space-x-10">
                    <a href="#about" onclick="showPage('home', 'about'); return false;" class="nav-link font-medium hover:text-green-600 transition">소개</a>
                    <a href="#activities" onclick="showPage('home', 'activities'); return false;" class="nav-link font-medium hover:text-green-600 transition">주요활동</a>
                    <a href="javascript:void(0)" onclick="showPage('news-list'); return false;" class="nav-link font-medium hover:text-green-600 transition">소식</a>
                    <button onclick="showPage('contact'); return false;" class="px-6 py-2.5 bg-green-600 text-white rounded-full font-bold hover:bg-green-700 transition shadow-lg hover:shadow-green-200">문의하기</button>
                </div>
                <div class="md:hidden flex items-center">
                    <button id="mobile-menu-button" onclick="toggleMobileMenu()" class="text-gray-600 focus:outline-none p-2">
                        <i class="fas fa-bars text-2xl"></i>
                    </button>
                </div>
            </div>
        </div>
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden bg-white border-t border-gray-100 px-6 py-6 space-y-4 shadow-xl text-gray-800 absolute w-full left-0 z-40">
            <a href="#about" onclick="showPage('home', 'about'); toggleMobileMenu(); return false;" class="block text-lg font-medium py-3 border-b border-gray-50">소개</a>
            <a href="#activities" onclick="showPage('home', 'activities'); toggleMobileMenu(); return false;" class="block text-lg font-medium py-3 border-b border-gray-50">주요활동</a>
            <a href="javascript:void(0)" onclick="showPage('news-list'); toggleMobileMenu(); return false;" class="block text-lg font-medium py-3 border-b border-gray-50">소식</a>
            <button onclick="showPage('contact'); toggleMobileMenu(); return false;" class="block w-full text-left text-lg font-bold text-green-600 pt-3">문의하기</button>
        </div>
    </nav>

    <!-- Home Page Content -->
    <div id="home-page" class="page-content active fade-in">
        <!-- Hero Section -->
        <section class="hero-section h-screen flex items-center justify-center text-center text-white px-4">
            <div data-aos="fade-up" data-aos-duration="1200">
                <p class="text-lg md:text-2xl mb-4 opacity-90 font-light tracking-widest">
                    놀고 꿈꾸고 연대하는
                </p>
                <h1 class="text-4xl md:text-5xl lg:text-7xl font-bold mb-8 md:mb-10 tracking-tight leading-tight">
                    사) 중랑마을넷
                </h1>
                
                <div class="flex flex-col sm:flex-row justify-center gap-4 md:gap-5">
                    <a href="#about" onclick="showPage('home', 'about'); return false;" class="bg-white text-green-700 px-8 py-3 md:px-10 md:py-4 rounded-full font-bold hover:bg-green-50 transition-all transform hover:-translate-y-1 shadow-xl text-sm md:text-base">더 알아보기</a>
                    <button onclick="showPage('news-list')" class="bg-green-600 text-white px-8 py-3 md:px-10 md:py-4 rounded-full font-bold hover:bg-green-700 transition-all transform hover:-translate-y-1 border border-green-500 shadow-xl text-sm md:text-base">최신 소식</button>
                </div>
            </div>
        </section>

        <!-- About Section -->
        <section id="about" class="py-16 md:py-32 bg-white">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-12 md:mb-20" data-aos="fade-up">
                    <h2 class="text-3xl md:text-4xl font-bold mb-4 text-gray-900">네트워크 소개</h2>
                    <div class="w-16 md:w-20 h-1.5 bg-green-500 mx-auto rounded-full"></div>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-10 md:gap-16 items-start">
                    <div data-aos="fade-right" class="md:sticky md:top-32">
                        <img src="https://images.unsplash.com/photo-1529156069898-49953e39b3ac?auto=format&fit=crop&q=80&w=800" alt="소개 이미지" class="rounded-2xl shadow-2xl w-full">
                    </div>
                    <div data-aos="fade-left">
                        <h3 class="text-lg md:text-xl font-bold mb-6 md:mb-8 italic text-green-700 leading-relaxed">다양한 주민들의 참여와 호혜적 관계망을 통해<br>민주적이고 행복한 마을공동체를 만들어갑니다.</h3>
                        
                        <!-- Accordion List -->
                        <div class="space-y-2">
                            <div class="border-b border-gray-100 last:border-0">
                                <button class="accordion-btn w-full flex items-center py-4 text-left focus:outline-none group">
                                    <span class="accordion-icon w-8 h-8 bg-green-100 text-green-600 rounded-full flex items-center justify-center mr-4 shadow-inner flex-shrink-0 transition-all duration-300 group-hover:bg-green-200"><i class="fas fa-chevron-down text-xs"></i></span>
                                    <span class="text-base md:text-lg font-medium text-gray-800 group-hover:text-green-600 transition-colors">중랑마을,장(場)</span>
                                </button>
                                <div class="accordion-content"><div class="pl-12 pb-6 text-gray-500 text-sm leading-relaxed">매월 첫째 금요일 '놀고 꿈꾸고 연대하는' 중랑마을,장(場)을 운영합니다.</div></div>
                            </div>
                            <div class="border-b border-gray-100 last:border-0">
                                <button class="accordion-btn w-full flex items-center py-4 text-left focus:outline-none group">
                                    <span class="accordion-icon w-8 h-8 bg-green-100 text-green-600 rounded-full flex items-center justify-center mr-4 shadow-inner flex-shrink-0 transition-all duration-300 group-hover:bg-green-200"><i class="fas fa-chevron-down text-xs"></i></span>
                                    <span class="text-base md:text-lg font-medium text-gray-800 group-hover:text-green-600 transition-colors">풀뿌리운동 연결 및 협력</span>
                                </button>
                                <div class="accordion-content"><div class="pl-12 pb-6 text-gray-500 text-sm leading-relaxed">지역의 다양한 풀뿌리운동을 연결하고 협력합니다.<br>기후위기, 성평등, 사회적경제, 인권, 어린이청소년, 지역사회통합돌봄, 주민자치와 마을공동체 활동가들과 네트워크합니다.</div></div>
                            </div>
                            <div class="border-b border-gray-100 last:border-0">
                                <button class="accordion-btn w-full flex items-center py-4 text-left focus:outline-none group">
                                    <span class="accordion-icon w-8 h-8 bg-green-100 text-green-600 rounded-full flex items-center justify-center mr-4 shadow-inner flex-shrink-0 transition-all duration-300 group-hover:bg-green-200"><i class="fas fa-chevron-down text-xs"></i></span>
                                    <span class="text-base md:text-lg font-medium text-gray-800 group-hover:text-green-600 transition-colors">위탁운영</span>
                                </button>
                                <div class="accordion-content"><div class="pl-12 pb-6 text-gray-500 text-sm leading-relaxed">중랑마을지원센터와 중랑교육복지센터를 위탁운영합니다.</div></div>
                            </div>
                            <div class="border-b border-gray-100 last:border-0">
                                <button class="accordion-btn w-full flex items-center py-4 text-left focus:outline-none group">
                                    <span class="accordion-icon w-8 h-8 bg-green-100 text-green-600 rounded-full flex items-center justify-center mr-4 shadow-inner flex-shrink-0 transition-all duration-300 group-hover:bg-green-200"><i class="fas fa-chevron-down text-xs"></i></span>
                                    <span class="text-base md:text-lg font-medium text-gray-800 group-hover:text-green-600 transition-colors">활동가들의 역량 강화</span>
                                </button>
                                <div class="accordion-content"><div class="pl-12 pb-6 text-gray-500 text-sm leading-relaxed">활동가들의 역량을 강화하는 모임과 워크샵을 진행합니다.</div></div>
                            </div>
                            <div class="border-b border-gray-100 last:border-0">
                                <button class="accordion-btn w-full flex items-center py-4 text-left focus:outline-none group">
                                    <span class="accordion-icon w-8 h-8 bg-green-100 text-green-600 rounded-full flex items-center justify-center mr-4 shadow-inner flex-shrink-0 transition-all duration-300 group-hover:bg-green-200"><i class="fas fa-chevron-down text-xs"></i></span>
                                    <span class="text-base md:text-lg font-medium text-gray-800 group-hover:text-green-600 transition-colors">서울풀뿌리시민사회네트워크 연대</span>
                                </button>
                                <div class="accordion-content"><div class="pl-12 pb-6 text-gray-500 text-sm leading-relaxed">서울풀뿌리시민사회네트워크와 연대합니다.</div></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Activities Section -->
        <section id="activities" class="py-16 md:py-32 bg-gray-50">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-12 md:mb-20" data-aos="fade-up">
                    <h2 class="text-3xl md:text-4xl font-bold mb-4 text-gray-900">주요 활동</h2>
                    <div class="w-16 md:w-20 h-1.5 bg-green-500 mx-auto rounded-full mb-4 md:mb-6"></div>
                    <p class="text-gray-500 text-sm md:text-base max-w-2xl mx-auto">중랑마을넷은 지역 사회의 긍정적인 변화를 위해 네 가지 핵심 영역에 집중하고 있습니다.<br>카드를 클릭하면 관련 소식을 볼 수 있습니다.</p>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 md:gap-8">
                    <!-- Connection -->
                    <div class="activity-card bg-white p-8 rounded-3xl shadow-sm border border-gray-100 text-center" data-aos="fade-up" data-aos-delay="100" onclick="goToNewsCategory('market')">
                        <div class="w-16 h-16 md:w-20 md:h-20 bg-green-100 text-green-600 rounded-2xl flex items-center justify-center mx-auto mb-6 md:mb-8 shadow-inner">
                            <i class="fas fa-users text-2xl md:text-3xl"></i>
                        </div>
                        <h4 class="text-lg md:text-xl font-bold mb-3 md:mb-4">중랑마을,장(場)</h4>
                        <p class="text-gray-500 text-sm leading-relaxed">주민들이 자유롭게 만나고 소통하는 마을 공론장 및 축제</p>
                        <div class="mt-4 text-green-600 text-sm font-medium opacity-100 md:opacity-0 group-hover:opacity-100 transition-opacity">소식 보기 <i class="fas fa-arrow-right ml-1"></i></div>
                    </div>
                    <!-- Agenda -->
                    <div class="activity-card bg-white p-8 rounded-3xl shadow-sm border border-gray-100 text-center" data-aos="fade-up" data-aos-delay="200" onclick="goToNewsCategory('network')">
                        <div class="w-16 h-16 md:w-20 md:h-20 bg-blue-100 text-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-6 md:mb-8 shadow-inner">
                            <i class="fas fa-bullhorn text-2xl md:text-3xl"></i>
                        </div>
                        <h4 class="text-lg md:text-xl font-bold mb-3 md:mb-4">네트워크 및 연대</h4>
                        <p class="text-gray-500 text-sm leading-relaxed">지역 단체 및 풀뿌리 모임 간의 협력과 연대 활동</p>
                    </div>
                    <!-- Education -->
                    <div class="activity-card bg-white p-8 rounded-3xl shadow-sm border border-gray-100 text-center" data-aos="fade-up" data-aos-delay="300" onclick="goToNewsCategory('support')">
                        <div class="w-16 h-16 md:w-20 md:h-20 bg-orange-100 text-orange-600 rounded-2xl flex items-center justify-center mx-auto mb-6 md:mb-8 shadow-inner">
                            <i class="fas fa-graduation-cap text-2xl md:text-3xl"></i>
                        </div>
                        <h4 class="text-lg md:text-xl font-bold mb-3 md:mb-4">활동가 지원</h4>
                        <p class="text-gray-500 text-sm leading-relaxed">마을 활동가들의 역량 강화 교육 및 성장 지원 프로그램</p>
                    </div>
                    <!-- Operation -->
                    <div class="activity-card bg-white p-8 rounded-3xl shadow-sm border border-gray-100 text-center" data-aos="fade-up" data-aos-delay="400" onclick="goToNewsCategory('operation')">
                        <div class="w-16 h-16 md:w-20 md:h-20 bg-purple-100 text-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-6 md:mb-8 shadow-inner">
                            <i class="fas fa-hand-holding-heart text-2xl md:text-3xl"></i>
                        </div>
                        <h4 class="text-lg md:text-xl font-bold mb-3 md:mb-4">위탁운영</h4>
                        <p class="text-gray-500 text-sm leading-relaxed">주민들의 필요에 맞는 공공시설과 마을활력소를 주민 주도로 운영합니다.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- New Section: Latest News Preview -->
        <section id="latest-news" class="py-16 md:py-32 bg-white">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex flex-col md:flex-row justify-between items-end mb-8 md:mb-12 gap-4" data-aos="fade-up">
                    <div class="text-center md:text-left w-full md:w-auto">
                        <h2 class="text-3xl md:text-4xl font-bold mb-2 text-gray-900">최신 소식</h2>
                        <div class="w-16 md:w-20 h-1.5 bg-green-500 mx-auto md:mx-0 rounded-full"></div>
                    </div>
                    <button onclick="showPage('news-list')" class="group text-gray-500 font-bold hover:text-green-600 flex items-center justify-center md:justify-end transition w-full md:w-auto">
                        소식 전체보기 <i class="fas fa-arrow-right ml-2 group-hover:translate-x-1 transition-transform"></i>
                    </button>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 md:gap-8" id="latest-news-grid">
                    <div class="col-span-full text-center py-10 text-gray-400">소식을 불러오는 중...</div>
                </div>
            </div>
        </section>
    </div>

    <!-- News List Page Content -->
    <div id="news-list-page" class="page-content min-h-screen pt-28 md:pt-32 pb-20 bg-gray-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="mb-8 md:mb-12">
                <h2 class="text-3xl md:text-4xl font-bold mb-4 text-gray-900">전체 소식</h2>
                <div class="w-16 md:w-20 h-1.5 bg-green-500 rounded-full mb-8"></div>
                <!-- Expanded Filter Tabs Matching Activity Cards -->
                <div class="flex space-x-3 mb-10 overflow-x-auto pb-4 no-scrollbar" id="news-filter-container">
                    <button data-category="all" class="category-btn active px-5 py-2 md:px-6 md:py-2.5 bg-green-600 text-white rounded-full font-bold whitespace-nowrap transition shadow-md text-sm md:text-base">전체</button>
                    <button data-category="notice" class="category-btn px-5 py-2 md:px-6 md:py-2.5 bg-white text-gray-500 border border-gray-100 rounded-full font-bold hover:bg-gray-100 whitespace-nowrap transition text-sm md:text-base">공지사항</button>
                    <button data-category="market" class="category-btn px-5 py-2 md:px-6 md:py-2.5 bg-white text-gray-500 border border-gray-100 rounded-full font-bold hover:bg-gray-100 whitespace-nowrap transition text-sm md:text-base">중랑마을,장(場)</button>
                    <button data-category="network" class="category-btn px-5 py-2 md:px-6 md:py-2.5 bg-white text-gray-500 border border-gray-100 rounded-full font-bold hover:bg-gray-100 whitespace-nowrap transition text-sm md:text-base">네트워크 및 연대</button>
                    <button data-category="operation" class="category-btn px-5 py-2 md:px-6 md:py-2.5 bg-white text-gray-500 border border-gray-100 rounded-full font-bold hover:bg-gray-100 whitespace-nowrap transition text-sm md:text-base">위탁운영</button>
                    <button data-category="support" class="category-btn px-5 py-2 md:px-6 md:py-2.5 bg-white text-gray-500 border border-gray-100 rounded-full font-bold hover:bg-gray-100 whitespace-nowrap transition text-sm md:text-base">활동가 지원</button>
                </div>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 md:gap-8" id="full-news-grid">
                <div class="col-span-full text-center py-20 text-gray-400">데이터 로딩 중...</div>
            </div>
            <div class="mt-12 md:mt-20 text-center">
                <button onclick="showPage('home')" class="px-8 py-3 md:px-10 md:py-4 bg-white border border-gray-200 rounded-full text-gray-600 font-bold hover:bg-gray-50 transition shadow-sm hover:shadow-md text-sm md:text-base">메인으로 돌아가기</button>
            </div>
        </div>
    </div>

    <!-- News Detail Page Content -->
    <div id="news-detail-page" class="page-content min-h-screen pt-28 md:pt-32 pb-20 bg-white">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="mb-6 md:mb-8">
                <button onclick="showPage('news-list')" class="flex items-center text-gray-500 hover:text-green-600 transition font-medium text-sm md:text-base">
                    <i class="fas fa-arrow-left mr-2"></i> 목록으로 돌아가기
                </button>
            </div>
            <div class="mb-8 md:mb-10 text-center">
                <span id="detail-category" class="inline-block px-3 py-1 md:px-4 md:py-1.5 rounded-full bg-green-100 text-green-700 font-bold text-xs md:text-sm mb-4 md:mb-6 tracking-wide">카테고리</span>
                <h1 id="detail-title" class="text-2xl md:text-3xl lg:text-5xl font-bold text-gray-900 mb-4 md:mb-6 leading-tight break-keep">소식 제목이 들어갑니다</h1>
                <div class="flex justify-center items-center text-gray-500 text-xs md:text-sm">
                    <span id="detail-date"><i class="far fa-calendar-alt mr-2"></i> 2024.01.01</span>
                    <span class="mx-3">|</span>
                    <span>중랑마을넷</span>
                </div>
            </div>
            <div id="detail-image-container" class="mb-8 rounded-2xl md:rounded-3xl overflow-hidden shadow-lg bg-gray-100 hidden">
                <img id="detail-image" src="" alt="Detail Image" class="w-full h-auto object-cover">
            </div>
            <div id="detail-content" class="prose prose-base md:prose-lg max-w-none text-gray-600 leading-7 md:leading-8 whitespace-pre-wrap break-words"></div>
            <hr class="my-10 md:my-16 border-gray-200">
        </div>
    </div>

    <!-- Contact Page Content -->
    <div id="contact-page" class="page-content min-h-screen pt-28 md:pt-32 pb-20 bg-gray-50">
        <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 bg-white p-8 md:p-12 rounded-3xl shadow-xl">
             <h2 class="text-2xl md:text-3xl font-bold mb-6 md:mb-8 text-center">문의하기</h2>
             <form id="contactForm" class="space-y-4 md:space-y-6">
                 <div><label class="block text-sm font-bold mb-2">이름</label><input type="text" name="name" class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:ring-2 focus:ring-green-500 focus:outline-none text-base" required></div>
                 <div><label class="block text-sm font-bold mb-2">이메일</label><input type="email" name="email" class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:ring-2 focus:ring-green-500 focus:outline-none text-base" required></div>
                 <div><label class="block text-sm font-bold mb-2">내용</label><textarea name="message" rows="5" class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:ring-2 focus:ring-green-500 focus:outline-none text-base" required></textarea></div>
                 <button type="submit" class="w-full bg-green-600 text-white font-bold py-3 md:py-4 rounded-xl hover:bg-green-700 transition shadow-lg text-base">메시지 보내기</button>
             </form>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-zinc-900 py-12 md:py-20 text-center text-zinc-500 text-sm border-t border-zinc-800">
        <div class="max-w-7xl mx-auto px-4">
            <div class="mb-10 md:mb-16 border-b border-zinc-800 pb-8 md:pb-12">
                <h5 class="text-white font-bold mb-6 text-base md:text-lg tracking-tight">함께하는 단체들</h5>
                <div class="flex flex-wrap justify-center gap-x-4 md:gap-x-8 gap-y-3 md:gap-y-4 text-xs md:text-sm font-medium">
                    <a href="https://www.jnmaeul.org/" target="_blank" class="hover:text-green-500 transition duration-300">중랑마을지원센터</a>
                    <a href="http://www.xn--9d0bl8qloef3esxi74ce9ai18a.kr/" target="_blank" class="hover:text-green-500 transition duration-300">중랑교육복지센터</a>
                    <a href="https://j-can.kr/" target="_blank" class="hover:text-green-500 transition duration-300">중랑어린이청소년네트워크</a>
                </div>
            </div>
            <p class="text-xl md:text-2xl font-bold text-white mb-4 md:mb-8">중랑마을넷</p>
            <p class="max-w-md mx-auto mb-8 md:mb-10 leading-relaxed text-xs md:text-sm">서울특별시 중랑구 동일로 110길 32 1층</p>
            <div class="flex justify-center space-x-6 mb-8 md:mb-12">
                <a href="https://www.instagram.com/jnmaeulnet/" target="_blank" class="w-10 h-10 md:w-12 md:h-12 bg-zinc-800 rounded-full flex items-center justify-center hover:bg-green-600 hover:text-white transition group"><i class="fab fa-instagram text-lg md:text-xl group-hover:scale-110 transition-transform"></i></a>
                <a href="https://www.youtube.com/@jrmaeulnet" target="_blank" class="w-10 h-10 md:w-12 md:h-12 bg-zinc-800 rounded-full flex items-center justify-center hover:bg-red-600 hover:text-white transition group"><i class="fab fa-youtube text-lg md:text-xl group-hover:scale-110 transition-transform"></i></a>
                <a href="https://blog.naver.com/jrmaeulnet" target="_blank" class="w-10 h-10 md:w-12 md:h-12 bg-zinc-800 rounded-full flex items-center justify-center hover:bg-green-500 hover:text-white transition group"><i class="fas fa-blog text-lg md:text-xl group-hover:scale-110 transition-transform"></i></a>
            </div>
            <p class="tracking-widest uppercase text-[10px] md:text-xs">&copy; 2026 JUNG-RANGCITY VILLAGE NETWORK.</p>
        </div>
    </footer>

    <!-- Firebase Logic -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, collection, onSnapshot, query, orderBy } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        let firebaseConfig;
        if (typeof __firebase_config !== 'undefined') {
            firebaseConfig = JSON.parse(__firebase_config);
        } else {
            firebaseConfig = {
                apiKey: "AIzaSyAlGFAgrJLCz1Xno3lDwRaTONPhsXBujOM",
                authDomain: "jrmaeulnet-5021b.firebaseapp.com",
                projectId: "jrmaeulnet-5021b",
                storageBucket: "jrmaeulnet-5021b.firebasestorage.app",
                messagingSenderId: "48501741158",
                appId: "1:48501741158:web:37131a2bb6b02137bd7fa7",
                measurementId: "G-81GTM29VF7"
            };
        }

        const appId = typeof __app_id !== 'undefined' ? __app_id : 'jungnang-maeul-net';

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        const initAuth = async () => {
            try {
                if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                    await signInWithCustomToken(auth, __initial_auth_token);
                } else {
                    await signInAnonymously(auth);
                }
            } catch (error) {
                console.error("Auth Failed:", error);
            }
        };
        initAuth();

        const latestNewsGrid = document.getElementById('latest-news-grid');
        const fullNewsGrid = document.getElementById('full-news-grid');
        let allNewsData = [];

        onAuthStateChanged(auth, (user) => {
            if (user) {
                const q = collection(db, 'artifacts', appId, 'public', 'data', 'news');
                onSnapshot(q, (snapshot) => {
                    allNewsData = [];
                    snapshot.forEach(doc => {
                        allNewsData.push({ id: doc.id, ...doc.data() });
                    });
                    
                    allNewsData.sort((a, b) => new Date(b.date) - new Date(a.date));
                    
                    renderLatestNews();
                    renderFullNews();
                }, (error) => {
                    console.error(error);
                    latestNewsGrid.innerHTML = '<div class="col-span-full text-center py-10 text-gray-400">소식을 불러오는데 실패했습니다. (권한 오류 등)</div>';
                    fullNewsGrid.innerHTML = '<div class="col-span-full text-center py-10 text-gray-400">소식을 불러오는데 실패했습니다.</div>';
                });
            }
        });

        const catMap = {
            'notice': '공지사항', 'market': '중랑마을,장(場)', 'network': '네트워크 및 연대',
            'operation': '위탁운영', 'support': '활동가 지원'
        };
        const catColorMap = {
            'notice': 'green', 'market': 'blue', 'network': 'purple',
            'operation': 'orange', 'support': 'red'
        };

        function renderLatestNews() {
            latestNewsGrid.innerHTML = '';
            const latest = allNewsData.slice(0, 4);
            
            if (latest.length === 0) {
                latestNewsGrid.innerHTML = '<div class="col-span-full text-center py-10 text-gray-400">최신 소식이 없습니다.</div>';
                return;
            }

            latest.forEach(item => {
                const color = catColorMap[item.category] || 'gray';
                const el = document.createElement('div');
                el.className = `news-item bg-white rounded-2xl overflow-hidden shadow-sm hover:shadow-xl border border-gray-100 group transition-all duration-300 cursor-pointer`;
                el.onclick = () => openNewsDetail(item);
                
                const thumbSrc = item.imageUrl ? item.imageUrl : 'https://via.placeholder.com/400x300?text=No+Image';

                el.innerHTML = `
                    <div class="h-48 overflow-hidden">
                        <img src="${thumbSrc}" class="w-full h-full object-cover group-hover:scale-110 transition duration-700">
                    </div>
                    <div class="p-6">
                        <span class="text-xs font-bold text-${color}-600 mb-2 block uppercase tracking-wider">${catMap[item.category] || item.category}</span>
                        <h4 class="font-bold text-lg mb-3 line-clamp-2 leading-snug group-hover:text-${color}-600 transition">${item.title}</h4>
                        <div class="flex items-center text-gray-400 text-xs mt-4"><i class="far fa-calendar-alt mr-2"></i> ${item.date}</div>
                    </div>
                `;
                latestNewsGrid.appendChild(el);
            });
        }

        function renderFullNews() {
            fullNewsGrid.innerHTML = '';
            
            if (allNewsData.length === 0) {
                fullNewsGrid.innerHTML = '<div class="col-span-full text-center py-10 text-gray-400">등록된 소식이 없습니다.</div>';
                return;
            }

            allNewsData.forEach(item => {
                const color = catColorMap[item.category] || 'gray';
                const el = document.createElement('div');
                el.className = `news-item bg-white rounded-2xl overflow-hidden shadow-sm hover:shadow-xl border border-gray-100 group cursor-pointer`;
                el.setAttribute('data-cat', item.category);
                el.onclick = () => openNewsDetail(item);
                
                const thumbSrc = item.imageUrl ? item.imageUrl : 'https://via.placeholder.com/400x300?text=No+Image';

                el.innerHTML = `
                    <div class="h-44 bg-gray-200 overflow-hidden">
                        <img src="${thumbSrc}" class="w-full h-full object-cover group-hover:scale-110 transition duration-700">
                    </div>
                    <div class="p-6">
                        <span class="text-xs font-bold text-${color}-600 mb-2 block uppercase tracking-wider">${catMap[item.category] || item.category}</span>
                        <h4 class="font-bold text-lg mb-3 line-clamp-2 leading-snug group-hover:text-${color}-600 transition">${item.title}</h4>
                        <div class="flex items-center text-gray-400 text-xs mt-4"><i class="far fa-calendar-alt mr-2"></i> ${item.date}</div>
                    </div>
                `;
                fullNewsGrid.appendChild(el);
            });
        }

        window.openNewsDetail = (itemData) => {
            const detailImage = document.getElementById('detail-image');
            const detailImageContainer = document.getElementById('detail-image-container');
            
            document.getElementById('detail-category').innerText = catMap[itemData.category] || itemData.category;
            document.getElementById('detail-title').innerText = itemData.title;
            document.getElementById('detail-date').innerHTML = `<i class="far fa-calendar-alt mr-2"></i> ${itemData.date}`;
            
            const contentDiv = document.getElementById('detail-content');
            contentDiv.innerHTML = itemData.content;
            
            const images = contentDiv.getElementsByTagName('img');
            for(let img of images) {
                img.style.maxWidth = '100%';
                img.style.height = 'auto';
                img.style.borderRadius = '0.5rem';
                img.style.marginTop = '1rem';
                img.style.marginBottom = '1rem';
            }
            
            if (itemData.imageUrl && itemData.imageUrl.trim() !== '' && !itemData.imageUrl.includes('placeholder')) {
                detailImage.src = itemData.imageUrl;
                detailImageContainer.classList.remove('hidden');
            } else {
                detailImageContainer.classList.add('hidden');
            }
            
            showPage('news-detail');
        };
    </script>

    <script>
        AOS.init({ duration: 800, once: true });

        function showPage(pageId, sectionId = null) {
            const allPages = document.querySelectorAll('.page-content');
            const targetPage = document.getElementById(pageId + '-page');
            if (!targetPage) return;

            if (targetPage.classList.contains('active')) {
                if (sectionId) {
                    const section = document.getElementById(sectionId);
                    if (section) {
                        const headerOffset = 80;
                        const elementPosition = section.getBoundingClientRect().top;
                        const offsetPosition = elementPosition + window.pageYOffset - headerOffset;
                        window.scrollTo({ top: offsetPosition, behavior: 'smooth' });
                    }
                } else {
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                }
                return;
            }

            allPages.forEach(page => {
                if (page.classList.contains('active')) {
                    page.classList.remove('fade-in');
                    setTimeout(() => {
                        page.classList.remove('active');
                        targetPage.classList.add('active');
                        
                        if (sectionId) {
                            const section = document.getElementById(sectionId);
                            if(section) {
                                const headerOffset = 80;
                                const elementPosition = section.getBoundingClientRect().top;
                                const offsetPosition = elementPosition + window.pageYOffset - headerOffset;
                                window.scrollTo({ top: offsetPosition, behavior: 'auto' });
                            }
                        } else {
                            window.scrollTo({ top: 0, behavior: 'instant' });
                        }
                        
                        requestAnimationFrame(() => {
                            targetPage.classList.add('fade-in');
                        });
                    }, 400); 
                }
            });
            
            if (!document.querySelector('.page-content.active')) {
                targetPage.classList.add('active');
                requestAnimationFrame(() => targetPage.classList.add('fade-in'));
            }
        }
        window.showPage = showPage;

        function goToNewsCategory(category) {
            showPage('news-list');
            setTimeout(() => {
                const targetBtn = document.querySelector(`.category-btn[data-category="${category}"]`);
                if (targetBtn) targetBtn.click();
            }, 100);
        }
        window.goToNewsCategory = goToNewsCategory;

        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            menu.classList.toggle('hidden');
        }
        window.toggleMobileMenu = toggleMobileMenu;

        const accordionBtns = document.querySelectorAll('.accordion-btn');
        accordionBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                this.classList.toggle('active');
                const content = this.nextElementSibling;
                if (content.style.maxHeight) {
                    content.style.maxHeight = null;
                    content.style.opacity = '0';
                } else {
                    content.style.maxHeight = content.scrollHeight + "px";
                    content.style.opacity = '1';
                }
            });
        });

        const filterBtns = document.querySelectorAll('.category-btn');
        filterBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                const category = btn.getAttribute('data-category');
                filterBtns.forEach(b => {
                    b.classList.remove('bg-green-600', 'text-white', 'shadow-md');
                    b.classList.add('bg-white', 'text-gray-500');
                });
                btn.classList.add('bg-green-600', 'text-white', 'shadow-md');
                btn.classList.remove('bg-white', 'text-gray-500');

                const newsItems = document.querySelectorAll('#full-news-grid .news-item');
                let visibleCount = 0;
                
                newsItems.forEach((item) => {
                    item.classList.remove('item-animate');
                    if (category === 'all' || item.getAttribute('data-cat') === category) {
                        item.classList.remove('hidden-category');
                        setTimeout(() => item.classList.add('item-animate'), visibleCount * 50);
                        visibleCount++;
                    } else {
                        item.classList.add('hidden-category');
                    }
                });
            });
        });

        // Formspree 연동
        document.getElementById('contactForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const form = e.target;
            const data = new FormData(form);
            
            // [설정] 본인의 Formspree ID를 여기에 입력하세요. (https://formspree.io)
            const formId = "xlggbklv";

            if (!formId || formId === "xnq...kdj") {
                alert("⚠️ 관리자님, Formspree ID 설정이 필요합니다!\n코드의 'formId' 변수에 ID를 넣어주세요.");
                return;
            }

            const submitBtn = form.querySelector('button');
            const originalText = submitBtn.innerText;
            submitBtn.innerText = '전송 중...';
            submitBtn.disabled = true;

            try {
                const response = await fetch(`https://formspree.io/f/${formId}`, {
                    method: 'POST', body: data, headers: { 'Accept': 'application/json' }
                });
                
                if (response.ok) {
                    alert('문의가 전송되었습니다. 확인 후 답변드리겠습니다!');
                    form.reset();
                    showPage('home');
                } else {
                    alert('전송에 실패했습니다. 다시 시도해주세요.');
                }
            } catch (error) {
                alert('네트워크 오류가 발생했습니다.');
            } finally {
                submitBtn.innerText = originalText;
                submitBtn.disabled = false;
            }
        });

        let lastScrollY = window.scrollY;
        const nav = document.getElementById('main-nav');
        window.addEventListener('scroll', () => {
            if (window.scrollY > lastScrollY && window.scrollY > 100) {
                nav.classList.replace('nav-visible', 'nav-hidden');
            } else {
                nav.classList.replace('nav-hidden', 'nav-visible');
                nav.style.backgroundColor = window.scrollY > 50 ? "rgba(255,255,255,0.98)" : "#fff";
            }
            lastScrollY = window.scrollY;
        });
    </script>
</body>
</html>
